---
title: 串行端口控制台重定向表 (SPCR)
description: 串行端口控制台重定向表，用于指示串行端口或非旧 UART 接口是否可与 Microsoft® Windows®紧急管理服务 (EMS) 一起使用。
keywords:
- SPCR
- EMS
- UART
ms.date: 07/23/2018
ms.openlocfilehash: 78a33086dd50b5b503116a8ebcf88edffbcd2896
ms.sourcegitcommit: 20569e032b1e0963ad295e9c46b7682832af3d44
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/18/2021
ms.locfileid: "100648170"
---
# <a name="serial-port-console-redirection-table--spcr"></a>串行端口控制台重定向表 (SPCR) 

本文档定义串行端口控制台重定向表的内容。 此表用于指示串行端口或非旧 UART 接口是否可与 Microsoft® Windows®紧急管理服务 (EMS) 一起使用。

该表提供了有关配置和使用串行端口或非旧式 UART 接口的信息。 在 BIOS 或系统固件使用串行端口进行控制台输入/输出的系统上，应使用此表来传达有关设置的信息，以确保固件控制台输出和 Windows EMS 输出之间的无缝转换。

该表必须位于具有其他 ACPI 表的系统内存中，并且必须在 ACPI RSDT 表中进行引用。

> 专利通知： Microsoft 根据以下两个选项，为此规范的实现提供某些专利权限：
>
>1. Microsoft 的社区承诺，提供于 <https://www.microsoft.com/openspecifications/en/us/programs/community-promise/default.aspx> ; 或
>2. 从1.0 年10月 1 2012 日起，开源最终规范协议版本 ( "OWF 1.0" ) [http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0/](http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0) 。

| 字段 | **字节长度** | **字节偏移量** | **说明** |
|-----------|-----------------|-----------------|-----------------|
| 标头 |  |  |  |
| 签名 | 4 | 0 | "SPCR"。 串行端口控制台重定向表的签名。 |
| 长度 | 4 | 4 | 整个串行端口控制台重定向表的长度（以字节为单位）。 |
| 修订 | 1 | 8 | 2 |
| 校验和 | 1 | 9 | 整个表格的总和必须为零。 |
| OEMID | 6 | 10 | OEM ID。 |
| OEM 表格 ID | 8 | 16 | 对于串行端口控制台重定向表，表 ID 是制造商型号 ID。 |
| OEM 修订 | 4 | 24 | 提供的 OEM 表 ID 的串行端口控制台重定向表的 OEM 修订版。 |
| 创建者 ID | 4 | 28 | 创建该表的实用工具的供应商 ID。 对于 DSDT、RSDT、SSDT 和 PSDT 表，这是 ASL 编译器的 ID。 |
| 创建者修订 | 4 | 32 | 创建该表的实用工具的修订。 对于 DSDT、RSDT、SSDT 和 PSDT 表，这是 ASL 编译器的修订版本。 |
| 接口类型 | 1 | 36 | 指示注册接口的类型： <p> 对于修订版本1： </p> <ul><li>0 = 完整16550接口 </li><li>1 = 完整16450接口 (还必须接受写入 16550 FCR register)  </li><li>2-255 = 保留 </li></ul><p>对于修订版2： <p>请参阅[DBG2 规范](../bringup/acpi-debug-port-table.md)的表3中的串行端口子类型 </p> |
| 预留 | 3 | 37 | 必须为 0。 |
| 基址 | 12 | 40|<p>使用 ACPI 一般地址结构描述的串行端口寄存器集的基址。</p>0 = 禁用控制台重定向 <p>**注意：** <p>COM1 (0x3F8) ：</p><ul><li>整数格式： 0x 01 08 00 00 00000000000003F8</li><li>在内存中查看：0x01080000F803000000000000</li></ul><p>COM2 (0x2F8) ：<ul><li>整数格式： 0x 01 08 00 00 00000000000002F8</li><li>在内存中查看：0x01080000F802000000000000 </li></ul> |
| 中断类型 | 1 | 52 | UART 使用的中断类型 () ：<ul><li>位 [0]： PC 兼容双 8259 IRQ 中断</li><li>位 [1]： i/o APIC 中断 (全局系统中断) </li><li>位 [2]： i/o SAPIC 中断 (全局系统中断) </li><li>位 [3]： ARMH GIC 中断 (全局系统中断) </li><li>Bit [4： 7]：保留的 (必须设置为 0) </li></ul> 其中 <ul><li>0 = 不支持</li><li>1 = 支持</li></ul> 同时具有双8259和 i/o APIC 或 i/o SAPIC 的平台必须将 IRQ 位 (位 [0] ) ，并将相应的全局系统中断位 (例如，支持8259和 SAPIC 的系统将是 5) 。 |
| IRQ | 1 | 53 | UART 使用的计算机兼容 IRQ： <ul><li>2-7、9-12、14-15 = 分别为有效的 Irq</li><li>0-1、8、13、16-255 = 保留</li></ul> 仅当设置了中断类型字段的位 [0] 时才有效。 |
| 全局系统中断 | 4 | 54 | GSIV 使用的全局系统中断 () 。 <p>如果位 [0] 是 "中断类型" 字段中设置的唯一位，则无效。 </p> |
| 波特率 | 1 | 58 | 用于重定向的 BIOS 波特率： <ul><li>0 = As 是，操作系统将依赖串行端口的当前配置，直到完整的特色驱动程序初始化。</li><li>3 = 9600</li><li>4 = 19200</li><li>6 = 57600</li><li>7 = 115200</li><li>1-2、5、8-255 = 保留</li></ul> |
| Parity | 1 | 59 | <ul><li>0 = 无奇偶校验</li><li>1-255 = 保留</li></ul> |
| 停止位 | 1 | 60 | <ul><li>1 = 1 停止位</li><li>0，2-255 = 保留</li></ul> |
| 流控制 | 1 | 61 | <ul><li>0 = 硬件流控制</li><li>1-255 = 保留</li></ul> |
| 终端类型 | 1 | 62 | BIOS 用于控制台重定向的终端协议： <ul><li>0 = VT100</li><li>1 = 扩展 VT100 (VT100 +) </li><li>2 = VT-UTF8</li><li>3 = ANSI<li>4-255 = 保留 </li></ul> |
| 语言 | 1 | 63 | BIOS 重定向的语言。 必须为 0。 |
| PCI 设备 ID | 2 | 64 | 指定包含 UART 的 PCI 设备的设备 ID 作为无外设端口。<p>如果不是 PCI 设备，则必须为0xFFFF。</p> |
| PCI 供应商 ID | 2 | 66 | 指定包含要用作无外设端口的 UART 的 PCI 设备的供应商 ID。<p>如果不是 PCI 设备，则必须为0xFFFF。</p> |
| PCI 总线编号 | 1 | 68 | PCI 总线编号（如果表描述 PCI 设备）。<p>如果不是 PCI 设备，则必须为0x00。</p> |
| PCI 设备号 | 1 | 69 | 如果表描述 PCI 设备，则 PCI 设备号。<p>如果不是 PCI 设备，则必须为0x00。</p> |
| PCI 函数号 | 1 | 70 | 如果表描述 PCI 设备，则 PCI 函数号。<p>如果不是 PCI 设备，则必须为0x00。</p> |
| PCI 标志 | 4 | 71 | PCI 兼容性标志位掩码。  默认情况下应为零。<ul><li>位 [0]：操作系统不应抑制 PNP 设备枚举或禁用此设备的电源管理。 如果不是 PCI 设备，则必须为0。</li><li>位 [1-31]：保留，必须为零。</li></ul> |
| PCI 段 | 1 | 75 | PCI 段号。 <p>对于 PCI 总线少于255的系统，此数字必须为0。 </p> |
| 预留 | 4 | 76 | 必须为 0。 |

## <a name="revision-history"></a>修订历史

| Date      | 审阅  | 说明 |
|--------|-----|------|
| 2/15/00   | .10  | 创建 |
| 3/1/00    | .50  | "SPCR"。 添加的签名数据 |
| 3/20/00   | .55  | 数据修订为包含端口和 irq |
| 3/22/00   | . 56  | 阐明了端口标识添加了禁用重定向功能的功能。 添加了指向通用寄存器地址结构的指针 |
| 3/23/00   | .56a | 格式设置、免责声明、副本编辑 |
| 4/24/00   | 。6   | 已在 web 上发布 WinHEC |
| 4/24/00   | 。6   | 公开发布草稿 |
| 5/25/00   | . 61  | 更正 BASE_ADDRESS 说明 |
| 5/25/00   | . 61  | 公开发布草稿 |
| 5/31/00   | 。7   | 更正 BASE_ADDRESS 说明示例。 添加了16540接口。 |
| 5/31/00   | . 71  | 将 GRAS 上的信息从注释更改为 " \* " |
| 5/31/00   | . 71  | 公开发布草稿 |
| 6/1/00    | . 72  | 将 GRAS COM 端口示例更改为小字节序。 将文本添加到行尾 |
| 7/12/00   | . 75  | 固定 IRQ 说明。 修复了添加 PCI 总线信息的各种格式问题。 |
| 7/26/00   | . 76  | 更新到 PCI 字段名称 "设备号"。 更改了简介语言以包括非旧的 UART。 |
| 8/10/00   | . 77  | 更改了中断信息，添加了 APIC 和 SAPIC 添加了流控制 |
| 9/22/00   | . 78  | 添加了 PCI 段 |
| 10/25/00  | .80  | 固定 PCI 标志部分。 添加了终端类型添加了 16450 FCR 信息 |
| 10/1/01   | . 95  | 删除语言代码 |
| 1/11/02   | 1.00 | 将更新的授权规范添加到1.00 |
| 3/12/14   | 1.01 | 在 Microsoft 社区承诺下发布 |
| 6/2/14    | 1.02 | 已将表修订版本更改为2，并添加了对其他接口类型的支持，如 DBG2 规范中所定义。 |
| 8/10/15   | 1.03 | 已更新的专利通知。 |
| 7/23/2018 | 1.04 | |
| 2020/6/5  | 1.05 | 编辑的格式 |
| 9/1/2020  | 1.06 | 已编辑格式设置和更新到 DBG2 规范的链接 |
| 2/17/2021 | 1.07 | 修复了 "停止位" 字段中的错误说明。 撤消意外删除流控制字段。 编辑的格式。 |
